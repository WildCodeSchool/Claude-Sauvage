{% extends "GedBundle::layout.html.twig" %}
{% block body %}
{% include "GedBundle::nav.html.twig" %}
{% include "GedBundle::search.html.twig" %}
<div class="col-md-10">
    <h3 style="text-align:center;">Mes Uploads</h3>
    <table class="table compact stripe" id="table">
        <thead> 
            <tr> 
                <th></th>
                <th>Nom du fichier</th>
                <th>Date</th>
                <th>Catégorie</th> 
                <th>Tags</th>
                <th>Favori</th>
                <th>Paramètres</th>
                <th>Telecharger</th>
            </tr> 
        </thead> 
        <tbody>
            {% if uploads is defined %}
                {% for upload in uploads %}
                    <tr>
                        <td>
                            {% if upload['type'] == 'jpeg' or upload['type'] == 'jpg' or upload['type'] == 'png' or upload['type'] == 'gif' %}
                                <span class="glyphicon glyphicon-picture" aria-hidden="true"></span>
                            {% elseif upload['type'] == 'txt' or upload['type'] == 'doc' %}
                                <span class="glyphicon glyphicon-file" aria-hidden="true"></span>
                            {% elseif upload['type'] == 'mp4' or upload['type'] == 'avi' %}
                                <span class="glyphicon glyphicon-film" aria-hidden="true"></span>
                            {% elseif upload['type'] == 'mp3' or upload['type'] == 'wave' %}
                                <span class=" glyphicon glyphicon-music" aria-hidden="true"></span>
                            {% else %}
                                Ico
                            {% endif %}
                        </td>
                        <td><a data-toggle="tooltip" data-placement="bottom" title="
                            Partagé avec: {% if upload['groupMemberName'] != 1 %}
                                            {% for member in  upload['groupMemberName'] %}
                                                {{ member['groupMemberName'] }} ,
                                            {% endfor %}
                                            {% else %}
                                                Aucun partage
                                            {% endif %}
                            Commentaires : {{ upload['comments'] }}"
                            href="{{ path('one_file' , {'id': upload['idfile'] }) }}">{{ upload['name'] }}</a></td>
                        <td>{{ upload['date'].date| date("d/m/Y")  }}</td>
                        <td>{{ upload['category'] }}</td> 
                        <td>
                            {% if upload['tagnames'] != 1 %}
                                {% for tag in upload['tagnames'] %}
                                        {{ tag['name'] }} ,
                                {% endfor %}
                            {% else %}
                                Aucun Tag
                            {% endif %}
                        </td>
                        <td>
                            {% if upload['bookmark'] != 1 %}
                                <span class="fav glyphicon glyphicon-star-empty" aria-hidden="true" value="{{upload.idfile}}"></span>
                            {% else %}
                                <span class="fav glyphicon glyphicon-star" aria-hidden="true" value="{{upload.idfile}}"></span>
                            {% endif %}
                        </td>
                        <td>
                            <a class="btn" href="{{ path('ged_parameters_file', { 'id' : upload['idfile'] }) }}" title="">
                            <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span></a>
                        </td>
                        <td>
                            <a class="btn" href="{{ path('ged_download', { 'name' : upload['path'] }) }}">
                                <span class="glyphicon glyphicon-cloud-download" aria-hidden="true"></span>
                            </a>
                        </td>
                    </tr>
                {% endfor %}
            {% endif %}
        </tbody>
    </table>
</div>
<script type="text/javascript"> 
$(document).ready(function() { 
    $('table').DataTable( { 
        "paging": false,
        "info": false,
        "sDom": '<"H"lr>t<"F"ip>',
        "columnDefs": [{ "orderable": false, "targets": [3,4] }],
        "order": [[1, "asc"]]
    } );
} );
$(function () {
  $('[data-toggle="tooltip"]').tooltip()
});
</script>
{% endblock body %}